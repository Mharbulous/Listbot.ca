# Phase 1.0: Foundation - Upload + Basic Table

**Phase:** 1.0 of 7
**Status:** In Progress
**Priority:** Critical
**Estimated Duration:** 3-4 days
**Dependencies:** None

---

## Overview

Create a complete upload-to-display pipeline with a standard table implementation. This phase establishes the foundation with working upload buttons, immediate visual feedback, and a functional table WITHOUT virtual scrolling complexity.

**Goal:** Self-contained upload system with immediate visual feedback using standard rendering
**Deliverable:** Three upload buttons + standard scrolling table + status system + footer with UPLOAD button
**User Impact:** "Look, I can upload files and see them in a table!" - Complete feature demonstration without relying on old upload system.

**Important:** This phase intentionally uses **standard rendering** (flex-based divs) without TanStack Virtual. Once confirmed working and bug-free, Phase 1.5 will add virtualization for performance at scale.

### Implementation Differences from Original Plan

**Architecture Changes:**
- âœ… Using **flex-based div layout** instead of HTML `<table>` for better alignment control
- âœ… **Upload buttons moved to AppHeader** - "+ Add to Queue" dropdown menu in header (not separate component when queue empty)
- âœ… **Empty state integrated into UploadTable** - Shows drag-and-drop zone when queue is empty
- âœ… **Select All checkbox column** added as FIRST column (60px) - not in original plan
- âœ… **No Actions column** - original plan had Actions column, but not implemented
- âœ… **Footer has TWO buttons**: "Clear X skipped files" (white) + "Upload X files" (green) instead of just UPLOAD
- âœ… **Skip/Undo system** - Files marked as 'skip' status instead of removing from queue
- âœ… **File Name column** uses flexible width (flex: 1) instead of fixed 300px
- âœ… **Folder Path column** reduced to 130px min-width (from 300px) to prevent wrapping
- âœ… **Status column** reduced to 100px (from 180px)
- âœ… All fixed columns use `flex-shrink: 0` to maintain width

---

## Why Start Without Virtualization?

**Benefits of standard table first:**
âœ… **Simpler Implementation:** No virtual scrolling complexity to debug
âœ… **Faster Development:** Standard Vue rendering patterns
âœ… **Easier Testing:** Standard DOM structure for testing
âœ… **Solid Foundation:** Ensure core logic works before optimization
âœ… **Clear Baseline:** Measure performance before/after virtualization

**Known Limitations:**
âš ï¸ Performance will degrade with 1000+ files (expected)
âš ï¸ Memory usage will scale with file count O(n) (expected)
âš ï¸ These limitations are intentional - Phase 1.5 will address them

---

## Part A: Upload Initiation (Three-Button System)

### A.1 Drag-and-Drop Zone

**Behavior:** When users drag and drop files or folders into the dropzone:
- **Files:** Queued immediately for upload
- **Folders:** Automatically extracts ALL files from the folder and its subfolders (recursive)
- **Mixed:** Processes both files and folders in a single drop

**Important:** Drag-and-drop of folders behaves like "Upload Folder + Subfolders" button - it always includes all nested files recursively. This provides the most intuitive user experience as users typically expect all files to be uploaded when they drag a folder.

### A.2 Three Upload Buttons

**Button Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  Drag and drop files or folders here, or:                      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Upload Files â”‚  â”‚ Upload Folder â”‚  â”‚ Upload Folder +      â”‚â”‚
â”‚  â”‚              â”‚  â”‚               â”‚  â”‚ Subfolders           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Button Specifications

#### Button 1: Upload Files
**Icon:** ğŸ“„
**Label:** "Upload Files"
**Behavior:** Multi-select file picker, any files from any location

```html
<input
  ref="fileInput"
  type="file"
  multiple
  accept="*/*"
  style="display: none"
  @change="handleFileSelect"
/>
<button @click="$refs.fileInput.click()">
  ğŸ“„ Upload Files
</button>
```

#### Button 2: Upload Folder
**Icon:** ğŸ“
**Label:** "Upload Folder"
**Behavior:** Root folder only (no recursion)

```javascript
const handleFolderSelect = (event) => {
  const allFiles = Array.from(event.target.files);
  const rootPath = allFiles[0].webkitRelativePath.split('/')[0];
  const rootFiles = allFiles.filter(file => {
    const parts = file.webkitRelativePath.split('/');
    return parts.length === 2 && parts[0] === rootPath;
  });

  console.log(`[FOLDER] Root only: ${rootFiles.length} files from ${rootPath}`);
  addFilesToQueue(rootFiles);
};
```

#### Button 3: Upload Folder + Subfolders
**Icon:** ğŸ“‚
**Label:** "Upload Folder + Subfolders"
**Behavior:** Full recursive upload

```javascript
const handleFolderRecursiveSelect = (event) => {
  const allFiles = Array.from(event.target.files);
  const folderName = allFiles[0].webkitRelativePath.split('/')[0];

  console.log(`[FOLDER+] Recursive: ${allFiles.length} files from ${folderName}`);
  addFilesToQueue(allFiles);
};
```

#### Drag-and-Drop Implementation
**Icon:** ğŸ“¦
**Behavior:** Recursive folder traversal (same as Button 3)

**Important:** Drag-and-drop requires special handling using the File System Access API to recursively traverse folders. When a folder is dropped, we must:
1. Detect if the dropped item is a directory using `DataTransferItem.webkitGetAsEntry()`
2. Recursively traverse all subdirectories
3. Collect all files from the folder tree
4. Queue all collected files for upload

```javascript
const handleDrop = async (event) => {
  isDragOver.value = false;

  // Get all dropped items
  const items = Array.from(event.dataTransfer.items);
  const allFiles = [];

  // Process each dropped item
  for (const item of items) {
    if (item.kind === 'file') {
      const entry = item.webkitGetAsEntry();
      if (entry) {
        await traverseFileTree(entry, allFiles);
      }
    }
  }

  if (allFiles.length > 0) {
    console.log(`[DROP] Collected ${allFiles.length} files`);
    emit('folder-recursive-selected', allFiles);
  }
};

// Recursive function to traverse folder tree
const traverseFileTree = async (entry, filesList) => {
  if (entry.isFile) {
    // It's a file - get the File object
    return new Promise((resolve) => {
      entry.file((file) => {
        filesList.push(file);
        resolve();
      });
    });
  } else if (entry.isDirectory) {
    // It's a directory - read its contents
    const dirReader = entry.createReader();
    return new Promise((resolve) => {
      dirReader.readEntries(async (entries) => {
        for (const childEntry of entries) {
          await traverseFileTree(childEntry, filesList);
        }
        resolve();
      });
    });
  }
};
```

**Why emit 'folder-recursive-selected'?** This ensures drag-and-drop uses the same processing pipeline as the "Upload Folder + Subfolders" button, maintaining consistency and code reusability.

### A.3 Non-Blocking Queue Progress

**For large batches (>500 files):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Queueing files... (324/720 analyzed)                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```javascript
const addFilesToQueue = async (files) => {
  const BATCH_SIZE = 100;
  const queueProgress = ref({
    isQueueing: true,
    processed: 0,
    total: files.length
  });

  for (let i = 0; i < files.length; i += BATCH_SIZE) {
    const batch = files.slice(i, i + BATCH_SIZE);
    await processBatch(batch);
    queueProgress.value.processed = Math.min(i + BATCH_SIZE, files.length);
    await nextTick();
  }

  queueProgress.value.isQueueing = false;
};
```

---

## Part B: Standard Table (No Virtualization)

### B.1 Table Structure

**Column Layout (Flex-based):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select â”‚ File Name                     â”‚ Size     â”‚ Folder Path  â”‚ Status  â”‚
â”‚ (60px) â”‚ (flex: 1, expands)            â”‚ (100px)  â”‚ (130px min)  â”‚ (100px) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [âœ“]    â”‚ invoice.pdf                   â”‚ 2.4 MB   â”‚ /2024/Tax    â”‚ ğŸ”µ Readyâ”‚
â”‚ [âœ“]    â”‚ report-with-very-long-name... â”‚ 890 KB   â”‚ /Reports     â”‚ ğŸŸ¡ Up...â”‚
â”‚ [ ]    â”‚ form.pdf                      â”‚ 1.2 MB   â”‚ /Forms       â”‚ âšª Skip  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Footer:                                                                    â”‚
â”‚ Total: 715 | Skipped: 1 | Duplicates: 5 | Failed: 0 | Uploaded: 0/710    â”‚
â”‚ [Clear 1 skipped file]  [Upload 710 files (380.3 MB)]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Differences from Original Plan:**
- Using **flex-based layout** (divs) instead of HTML table for better control
- **Select column**: 60px with Select All checkbox in header (NEW - not in original plan)
- **No Actions column** - original plan had peek/upload buttons (not implemented)
- **File Name column**: Flexible width (flex: 1) - expands to fill remaining space
- **Status column**: 100px (moved to last column position)
- **Folder Path column**: 130px minimum (original plan was 300px)
- **No CLEAR button in header** - moved to footer instead
- **Footer**: TWO buttons (Clear skipped + Upload) with stats on left side

### B.2 Status System (8 Statuses)

| Dot | Color | Status Key | Display Text | Meaning |
|-----|-------|-----------|--------------|---------|
| ğŸ”µ | Blue | `ready` | Ready | Queued, ready for upload |
| ğŸŸ¡ | Yellow | `uploading` | Uploading... | Currently being uploaded |
| ğŸŸ¢ | Green | `completed` | Uploaded | Successfully uploaded |
| âšª | White/Gray | `skip` | Skipped | User manually skipped (can undo) |
| âšª | White | `skipped` | Duplicate | Detected as duplicate |
| ğŸ”´ | Red | `error` | Failed | Upload failed with error |
| ğŸŸ  | Orange | `uploadMetadataOnly` | Metadata Only | Uploaded metadata only |
| âš« | Gray | `unknown` | Unknown | Unknown status (fallback) |

**Note:** `skip` status was added for user-controlled skipping (with undo capability), separate from `skipped` which is for automatic duplicate detection.

```css
.status-ready { background-color: #2196F3; }
.status-uploading { background-color: #FFC107; }
.status-completed { background-color: #4CAF50; }
.status-skipped { background-color: #9C27B0; }
.status-error { background-color: #F44336; }
.status-uploadMetadataOnly { background-color: #FFFFFF; border: 1px solid #ccc; }
.status-unknown { background-color: #9E9E9E; }
```

### B.3 Footer Status Bar
**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Total: 715 | Skipped: 1 | Duplicates: 5 | Failed: 0 | Uploaded: 0/710        â”‚
â”‚                     [Clear 1 skipped file]  [Upload 710 files (380.3 MB)]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Footer Features:**
- **Left side**: File count statistics (total, skipped, duplicates, failed, uploaded)
- **Right side**: TWO buttons:
  - **Clear button** (white): "Clear X skipped files" - removes skipped files from queue (disabled if no skipped files)
  - **Upload button** (green): "Upload X files (size)" - starts upload (disabled if no files to upload)
- **Layout**: Flexbox with space-between for stats (left) and buttons (right)
```

```javascript
const footerStats = computed(() => {
  const total = uploadQueue.value.length;
  const totalSize = uploadQueue.value.reduce((sum, f) => sum + f.size, 0);
  const ready = uploadQueue.value.filter(f => f.status === 'ready').length;
  const duplicates = uploadQueue.value.filter(f => f.status === 'skipped').length;
  const failed = uploadQueue.value.filter(f => f.status === 'error').length;
  const uploaded = uploadQueue.value.filter(f => f.status === 'completed').length;
  const uploadable = total - duplicates;

  return {
    total,
    totalSize: formatBytes(totalSize),
    ready,
    duplicates,
    failed,
    uploaded,
    uploadable
  };
});
```

### B.4 Flex-Based Table Implementation (No Virtualization)

**Actual Implementation:** Using flex-based div layout instead of HTML table for better control and alignment.

```vue
<script setup>
import { computed } from 'vue';
import UploadTableHeader from './UploadTableHeader.vue';
import UploadTableRow from './UploadTableRow.vue';
import UploadTableFooter from './UploadTableFooter.vue';

const uploadQueue = ref([]);

// Simple standard rendering - no virtualization
const tableRows = computed(() => uploadQueue.value);
</script>

<template>
  <div class="upload-table-container">
    <!-- Sticky Header with CLEAR button -->
    <UploadTableHeader @clear-queue="handleClearQueue" />

    <!-- Scrollable Body -->
    <div class="scroll-container">
      <div class="table-body">
        <UploadTableRow
          v-for="file in tableRows"
          :key="file.id"
          :file="file"
          @cancel="handleCancel"
        />
      </div>
    </div>

    <!-- Footer with UPLOAD button and stats -->
    <UploadTableFooter :stats="footerStats" @upload="handleUpload" />
  </div>
</template>

<style scoped>
.upload-table-container {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 400px);
  min-height: 400px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
}

.scroll-container {
  flex: 1;
  overflow-y: auto;
  position: relative;
}

.table-body {
  display: flex;
  flex-direction: column;
}
</style>
```

**Architecture Notes:**
- **Header**: Sticky positioned with flex layout, includes CLEAR button
- **Body**: Scrollable container with standard (non-virtualized) row rendering
- **Footer**: Sticky positioned with UPLOAD button (left) and stats (right)
- **Rows**: Each row is a flex container matching header column widths

**Performance Expectations (Phase 1.0):**
- âœ… Works perfectly for <500 files
- âš ï¸ Acceptable performance for 500-1000 files
- âŒ Will be slow for 1000+ files (this is expected and acceptable)
- Memory usage: O(n) - scales with file count (will be fixed in Phase 1.5)

---

## Component Structure

### File Organization
```
src/features/upload/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ UploadButtons.vue            # Upload buttons with drag-drop (exists but NOT currently used)
â”‚   â”œâ”€â”€ UploadTable.vue              # Main table container (standard rendering) + integrated empty state
â”‚   â”œâ”€â”€ UploadTableHeader.vue        # Sticky header with Select All checkbox
â”‚   â”œâ”€â”€ UploadTableRow.vue           # Individual row with checkbox
â”‚   â”œâ”€â”€ UploadTableFooter.vue        # Footer with Clear + Upload buttons
â”‚   â”œâ”€â”€ StatusCell.vue               # Status dot + text (if exists)
â”‚   â””â”€â”€ QueueProgressIndicator.vue   # Non-blocking progress bar
â””â”€â”€ composables/
    â””â”€â”€ useUploadTable.js            # Table state management + skip/undo logic
```

**Implementation Notes:**
- Upload button triggers are in `AppHeader.vue` (not UploadButtons.vue)
- UploadButtons.vue exists but is not used in current implementation
- Empty state is integrated into UploadTable.vue (shown when isEmpty prop is true)
- No `useVirtualScroll.js` in this phase - that will be added in Phase 1.5

### Main Component: Testing.vue (Route: /testing)

**Actual Implementation:**

```vue
<template>
  <div class="main-viewport">
    <!-- Queue Progress (shown during large batch processing) -->
    <QueueProgressIndicator
      v-if="queueProgress.isQueueing"
      :processed="queueProgress.processed"
      :total="queueProgress.total"
    />

    <!-- Upload Table (ALWAYS SHOWN - contains integrated empty state) -->
    <div class="table-section">
      <UploadTable
        :files="uploadQueue"
        :is-empty="uploadQueue.length === 0"
        @cancel="handleCancelFile"
        @undo="handleUndoFile"
        @upload="handleUpload"
        @clear-queue="handleClearQueue"
        @files-dropped="handleFolderRecursiveSelected"
        @select-all="handleSelectAll"
        @deselect-all="handleDeselectAll"
      />
    </div>

    <!-- Hidden file inputs (triggered from AppHeader buttons) -->
    <input ref="fileInput" type="file" multiple style="display: none" @change="handleFileSelect" />
    <input ref="folderInput" type="file" webkitdirectory multiple style="display: none" @change="handleFolderSelect" />
    <input ref="folderRecursiveInput" type="file" webkitdirectory multiple style="display: none" @change="handleFolderRecursiveSelect" />
  </div>
</template>
```

**Key Implementation Details:**
- Located at `src/views/Testing.vue` (route: `/testing`)
- Uses `useUploadTable()` composable for state management
- UploadTable is **always shown** - displays empty state when queue is empty
- Upload buttons are in AppHeader (not in page component)
- Hidden file inputs listen for events from AppHeader buttons
- Skip/Undo system instead of remove from queue
- Select All / Deselect All functionality integrated
- Footer has Clear + Upload buttons (both integrated into UploadTable)

---

## Implementation Tasks

### Day 1: Upload Buttons & Queue Management

#### 1.1 Upload Buttons & Drag-and-Drop
- [x] Create `UploadButtons.vue` component (exists but not used - buttons moved to AppHeader)
- [x] Implement three file input types (files, folder, folder-recursive)
- [x] Add root-only filtering logic for Button 2
- [x] Implement drag-and-drop zone with recursive folder traversal (in UploadTable empty state)
- [x] Add `traverseFileTree()` helper function for folder extraction
- [x] Style buttons and dropzone with icons and hover states
- [x] Test file selection workflows
- [x] Test drag-and-drop with files, folders, and mixed content
- [x] **CHANGE:** Upload buttons integrated into AppHeader with "+ Add to Queue" dropdown menu
- [x] **CHANGE:** Empty state with drag-and-drop integrated into UploadTable component

#### 1.2 Queue Management
- [x] Create `QueueProgressIndicator.vue`
- [x] Implement batch processing with progress updates
- [x] Add queue state management (queueing, ready)
- [x] Test with various file counts (10, 100, 500)

#### 1.3 File Processing
- [x] Implement `addFilesToQueue()` function
- [x] Parse file metadata (name, size, path, modified date)
- [x] Create file objects with unique IDs
- [x] Set initial status to 'ready'

### Day 2: Table Structure & Basic Rendering

#### 1.4 Table Components
- [x] Create `UploadTable.vue` main component (flex-based div layout, not HTML table)
- [x] Create `UploadTableHeader.vue` with sticky positioning
- [x] Create `UploadTableRow.vue` with column cells
- [x] Set up column definitions (Select | File Name | Size | Folder Path | Status)
- [x] Add standard scrolling container
- [x] **CHANGE:** Added Select All checkbox column (60px) as first column
- [x] **CHANGE:** Removed Actions column (not implemented)

#### 1.5 Table Rendering
- [x] Implement standard v-for row rendering
- [x] Set up sticky header with CSS
- [x] Configure table scrolling container
- [x] **CHANGE:** Integrated empty state into UploadTable (shown when isEmpty prop is true)
- [ ] Test with 50, 100, 500 files
- [ ] Document performance at different file counts

#### 1.6 Status System
- [x] Create status display in UploadTableRow
- [x] Define 8 status types (added 'skip' status for user-controlled skipping)
- [x] Implement status dot rendering
- [x] Implement status text mapping
- [x] **CHANGE:** Added 'skip' status for manual file skipping (separate from 'skipped' for duplicates)
- [ ] Test all 8 status states

### Day 3: Footer & Integration

#### 1.7 Footer Status Bar
- [x] Create `UploadTableFooter.vue`
- [x] Implement reactive stats computation
- [x] Add real-time count updates
- [x] Format file sizes with `formatBytes()`
- [x] Style footer to match DocumentTable
- [x] **CHANGE:** Added TWO buttons (Clear skipped + Upload) instead of just Upload
- [x] **CHANGE:** Stats shown on left side, buttons on right side
- [x] **CHANGE:** Clear button removes skipped files, Upload button shows count and size
- [ ] Test stats accuracy with various file states

#### 1.8 Integration
- [x] Connect upload buttons (in AppHeader) to table display
- [x] Ensure files appear in table immediately after selection
- [x] Verify footer updates when files added
- [x] Test complete flow: upload â†’ display â†’ status
- [x] Implement Skip/Undo system with Select All / Deselect All
- [ ] Verify backward compatibility with existing upload logic

### Day 4: Styling, Testing & Polish

#### 1.9 Styling & Polish
- [ ] Import DocumentTable.css as base
- [ ] Create UploadTable.css for overrides
- [x] Match header styling (sticky, borders, spacing)
- [x] Match row styling (hover, alternating colors)
- [x] Match footer styling (background, padding)
- [x] Ensure responsive layout
- [ ] Test dark mode compatibility (if applicable)

#### 1.10 Testing
- [ ] Unit tests for all components
- [ ] Component tests for table rendering
- [ ] Performance benchmarks (baseline for Phase 1.5 comparison)
- [ ] Manual testing with various queue sizes
- [ ] Browser compatibility testing

---

## Testing Requirements

### Unit Tests

```javascript
describe('Upload Buttons', () => {
  it('files button opens file picker', () => {});
  it('folder button opens folder picker', () => {});
  it('folder recursive button opens folder picker', () => {});
  it('filters root-only files correctly', () => {});
  it('handles empty selection gracefully', () => {});
});

describe('UploadTable', () => {
  it('renders all columns', () => {});
  it('displays correct number of rows', () => {});
  it('updates footer stats reactively', () => {});
  it('handles empty queue gracefully', () => {});
});

describe('StatusCell', () => {
  it('renders correct dot color for each status', () => {});
  it('displays correct status text', () => {});
  it('updates when status changes', () => {});
});
```

### Integration Tests

```javascript
describe('Upload to Display Flow', () => {
  it('files appear in table immediately after selection', () => {});
  it('footer counts update when files added', () => {});
  it('queue progress shows for large batches', () => {});
  it('table renders all rows correctly', () => {});
});
```

### Performance Tests

```javascript
describe('Performance Benchmarks (Baseline for Phase 1.5)', () => {
  it('renders 100 files', async () => {
    const start = performance.now();
    await loadQueue(generateFiles(100));
    const duration = performance.now() - start;
    console.log(`[BASELINE] 100 files: ${duration}ms`);
  });

  it('renders 500 files', async () => {
    const start = performance.now();
    await loadQueue(generateFiles(500));
    const duration = performance.now() - start;
    console.log(`[BASELINE] 500 files: ${duration}ms`);
  });

  it('measures memory usage', () => {
    // Monitor memory across different queue sizes
    // Document for Phase 1.5 comparison
  });
});
```

### Manual Testing Scenarios

1. **Upload Files:**
   - Click "Upload Files" â†’ Select 10 files
   - Verify files appear in table immediately
   - Verify footer shows correct counts

2. **Upload Folder (Root Only):**
   - Click "Upload Folder" â†’ Select folder with subfolders
   - Verify only root-level files appear
   - Verify folder path displays correctly

3. **Upload Folder + Subfolders:**
   - Click "Upload Folder + Subfolders" â†’ Select folder
   - Verify all nested files appear
   - Verify folder paths show full hierarchy

4. **Drag-and-Drop Files:**
   - Drag 5-10 files into dropzone
   - Verify files appear in table immediately
   - Verify footer shows correct counts

5. **Drag-and-Drop Folder:**
   - Drag a folder with subfolders into dropzone
   - Verify ALL files from folder and subfolders appear (recursive)
   - Verify folder paths show full hierarchy
   - Behavior should match "Upload Folder + Subfolders" button

6. **Drag-and-Drop Mixed (Files + Folders):**
   - Drag multiple files and folders together
   - Verify all files are extracted and queued
   - Verify folders are traversed recursively

7. **Medium Batch (500 files):**
   - Upload 500 files
   - Verify queue progress indicator appears
   - Verify table displays after load
   - Document scrolling performance

8. **Empty State:**
   - Load page with no files
   - Verify empty state displays
   - Upload files â†’ verify transition to table

---

## Success Criteria

### Functional Requirements
- [x] Three upload buttons work correctly (via AppHeader "+ Add to Queue" dropdown)
- [x] Files appear in table immediately after selection
- [x] Table displays with all 5 columns (Select | File Name | Size | Folder Path | Status)
- [x] Standard scrolling works smoothly (for <500 files)
- [x] Status dots display with correct colors
- [x] Status text displays correctly
- [x] Footer shows live counts
- [x] Sticky header stays visible during scroll
- [x] Queue progress shows for large batches (>500 files)
- [x] No folder options modal appears
- [x] Root-only folder filtering works correctly
- [x] **NEW:** Select All checkbox in header works (selects/deselects all files)
- [x] **NEW:** Skip/Undo system works (files can be skipped and restored)
- [x] **NEW:** Empty state shows drag-and-drop zone when queue is empty
- [x] **NEW:** Clear button removes skipped files from queue

### Performance Requirements (Phase 1.0 Baseline)
- [ ] 100 files load and render smoothly
- [ ] 500 files load with acceptable performance
- [ ] Document baseline metrics for Phase 1.5 comparison
- [ ] No JavaScript errors or warnings
- [ ] Files queue immediately after selection (<500ms)

### Visual Requirements
- [x] Matches DocumentTable design system
- [x] Column widths are appropriate
- [x] Spacing and padding consistent
- [x] Hover states work correctly
- [x] Typography matches DocumentTable
- [x] Upload buttons styled attractively
- [x] Progress bar animates smoothly

---

## Performance Benchmarks

### Expected Performance (Phase 1.0)

| File Count | Expected Render Time | Expected Scroll Performance | Notes |
|------------|---------------------|----------------------------|-------|
| 100 files | <200ms | Smooth | Ideal range |
| 500 files | <1s | Acceptable | Upper comfortable limit |
| 1000 files | 1-3s | Sluggish | Will be slow (expected) |
| 5000+ files | >5s | Very slow | Not recommended for this phase |

**Performance Logging:**
```javascript
console.log('[PHASE 1.0 BASELINE] Upload initiation: Xms');
console.log('[PHASE 1.0 BASELINE] Files queued: X files in Xms');
console.log('[PHASE 1.0 BASELINE] Table render: Xms');
console.log('[PHASE 1.0 BASELINE] Memory usage: XMB for X files');
console.log('[PHASE 1.0 BASELINE] FPS during scroll: X');
```

These metrics will be compared against Phase 1.5 virtualized performance.

---

## Dependencies

### NPM Packages
**None required for Phase 1.0** - using standard Vue rendering

### Internal Dependencies
- `DocumentTable.css` - Base styling reference
- Existing upload orchestration logic (from old FileUpload.vue)

---

## Rollout Plan

### Development Schedule

**Day 1:** Upload buttons + basic queue management
**Day 2:** Table structure + standard rendering + status system
**Day 3:** Footer + complete upload-to-display flow
**Day 4:** Styling polish + comprehensive testing + baseline metrics

### Testing Steps
1. Unit tests for all components
2. Component tests for standard table rendering
3. Integration tests for upload-to-display flow
4. Performance baseline collection (for Phase 1.5 comparison)
5. Manual testing with various queue sizes
6. Browser compatibility testing

### Deployment
- Merge to `/testing` route (coexists with old `/upload`)
- Announce to test users (with file count limitations)
- Gather feedback on core functionality
- Collect baseline performance metrics
- Address any bugs before Phase 1.5

---

## Known Issues / Risks

### Technical Risks
| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Slow performance with 1000+ files | High | Low | Expected - Phase 1.5 will fix |
| Large folder selection causes browser hang | Medium | High | Progressive loading with batches |
| Memory usage scales with file count | High | Low | Expected - Phase 1.5 will fix |
| DOM rendering blocks UI with many files | Medium | Low | Expected - Phase 1.5 will fix |

### UX Risks
| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Users try to upload too many files | Medium | Medium | Show warning for >500 files |
| Users confused by new table layout | Low | Medium | Clear migration communication |
| Three-button system not intuitive | Low | High | Clear button labels, hover descriptions |
| Root-only folder filtering unexpected | Medium | Low | Clear button label, test user feedback |

---

## Next Phase Preview

**Phase 1.5:** Virtualization with TanStack
- Install `@tanstack/vue-virtual`
- Add virtual scrolling to existing working table
- Replace standard rendering with virtualized rendering
- Performance optimization for 1000+ files
- Compare metrics against Phase 1.0 baseline

Phase 1.5 builds on Phase 1.0's **proven, working foundation** by adding high-performance virtualization.

---

## Notes

- Phase 1.0 intentionally uses standard rendering for simplicity
- Known performance limitations are acceptable for this phase
- The goal is to ensure core upload and display logic works correctly
- All virtualization complexity is deferred to Phase 1.5
- Document actual performance metrics as baseline for Phase 1.5 comparison
- All testing happens at `/testing` route - no dependency on old system
- Capture screenshots for documentation

---

**Phase Status:** ğŸŸ¢ Core Implementation Complete (Testing and polish pending)
**Last Updated:** 2025-11-11
**Implementation Notes:**
- âœ… All upload buttons working (via AppHeader "+ Add to Queue" dropdown)
- âœ… Table structure complete with flex-based layout
- âœ… Header with Select All checkbox implemented
- âœ… Footer with Clear + Upload buttons implemented
- âœ… Status system with 8 status types (including 'skip' for manual skipping)
- âœ… Responsive column widths (Select: 60px, File Name: flex, Size: 100px, Folder Path: 130px, Status: 100px)
- âœ… Skip/Undo system for file management
- âœ… Select All / Deselect All functionality
- âœ… Empty state with drag-and-drop integrated into UploadTable
- âœ… Queue progress indicator for large batches
- â³ Upload logic implementation pending (TODO button just logs)
- â³ Comprehensive testing pending
- â³ Performance benchmarking pending

**Architecture Changes Summary:**
1. Upload buttons moved from standalone component to AppHeader dropdown
2. Empty state integrated into UploadTable (not separate component)
3. Select All checkbox added as first column
4. Skip/Undo system instead of remove from queue
5. Footer has two buttons (Clear skipped + Upload)
6. No Actions column (not implemented)
