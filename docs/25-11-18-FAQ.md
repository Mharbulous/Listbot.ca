# Frequently Asked Questions (FAQ)

**Reconciled up to**: 2025-11-18

## Key Files

- `src/features/upload/components/UploadDropzone.vue` - File selection with webkitdirectory
- `src/features/upload/composables/useUploadState.js` - Upload filtering logic (getUploadableFiles)
- `src/features/upload/components/UploadTableFooterStats.vue` - File count display
- `src/features/upload/composables/useFileUploadHandlers.js` - Duplicate/copy processing

---

## File Upload and Processing

### Q: Why does my upload queue show fewer files than Windows File Explorer?

**A:** There are **two types of filtering** that can cause file count discrepancies: browser security filtering and application deduplication.

#### Browser Security Filtering

You may notice a small discrepancy (typically 1-3 files) between what Windows File Explorer counts and what appears in your upload queue. This is normal behavior due to browser security filtering.

**What's happening:**
- **Windows File Explorer** counts ALL files, including hidden system files
- **Browser file selection** (webkitdirectory API) automatically filters out certain files for security reasons
- **Your upload queue** shows exactly what the browser allows you to select

**Files that browsers typically filter out:**
- `desktop.ini` (Windows folder configuration files)
- `thumbs.db` (Windows thumbnail cache files)
- Files starting with `.` (hidden files)
- Files with Windows `FILE_ATTRIBUTE_HIDDEN` attribute
- Certain system files for security protection

**Example:**
- Windows Explorer: 2,284 files
- Upload queue: 2,282 files
- Difference: 2 hidden system files (likely `desktop.ini` or `thumbs.db`)

**Why this is good:**
This filtering protects you from accidentally uploading system files that:
- Contain personal metadata
- Are specific to your computer setup
- Don't need to be backed up or shared
- Could pose security risks

#### Application Deduplication

You may also see differences due to the application's intelligent deduplication system, which identifies and handles duplicate files.

**What's happening:**
- The application analyzes files and categorizes them as:
  - **"Ready"** (primary files) - Unique files that will be uploaded
  - **"Copies"** - Files with identical content but different metadata (e.g., same photo with different filename/date)
  - **"Duplicates"** - Files with identical content AND metadata

**File counts shown:**
- The upload queue displays: **"X Ready + Y Copies = Z Total"**
- Only **Ready (primary)** files are uploaded to storage
- **Copies** have their metadata recorded but are NOT uploaded (saves storage space)
- **Duplicates** are skipped entirely

**Example:**
- Files selected: 2,282 files
- Ready to upload: 1,950 files (primary files)
- Copies: 332 files (same content, different metadata)
- Total shown: 2,282 files

**Why this is good:**
Deduplication provides significant benefits:
- **Saves storage space** - Identical files are only stored once
- **Saves upload time** - Skip uploading files that already exist
- **Preserves metadata** - Copy file information is still recorded for your reference
- **Automatic detection** - Uses BLAKE3 hash verification to ensure accuracy

**Bottom line:** File count differences are intentional and beneficial. Browser filtering protects you from uploading system files, while application deduplication saves storage space and upload time. Your actual photos, documents, and important files are all being processed correctly.

---

### Q: What's the difference between "Ready," "Copies," and "Duplicates"?

**A:** The application uses precise terminology to describe file relationships:

- **"Ready" (or "Primary")**: Files with unique content that will be uploaded to storage. These are the files you'll see in your document organizer after upload completes.

- **"Copies"**: Files with identical content (same hash) but different file metadata (name, modified date, or path). The file content is NOT uploaded again, but the metadata IS recorded so you have a record of all the different versions/locations.
  - Example: The same photo saved as both `IMG_1234.jpg` and `vacation_beach.jpg`
  - Result: One file uploaded, both filenames recorded

- **"Duplicates"**: Files with identical content AND identical metadata. These provide no additional informational value, so they are skipped entirely (not uploaded, metadata not recorded).
  - Example: Exact copies from a backup folder with the same filename and date
  - Result: Skipped completely after verification

**Key Distinction**: Copies have meaningful metadata differences, duplicates don't. The application preserves what's valuable and skips what's redundant.

---

### Q: How does the application detect duplicate files?

**A:** The application uses a multi-stage deduplication process:

**Stage 1: Size-based pre-filtering**
- Files with unique sizes skip hash calculation (guaranteed unique content)
- Files with matching sizes proceed to hash verification

**Stage 2: Hash verification**
- BLAKE3 cryptographic hashing ensures accurate content comparison
- Hash calculation runs in a web worker to keep the UI responsive
- Files are grouped by hash value

**Stage 3: Metadata comparison**
- Files with the same hash are compared for metadata differences
- Files with meaningful metadata differences are marked as "copies"
- Files with identical metadata are marked as "duplicates"

**Result**: Only unique content is uploaded, but all meaningful metadata is preserved.

---

### Q: Can I upload duplicate files if I want to?

**A:** Yes! The upload queue allows you to review and manage how duplicates are handled:

- **View all files**: Use the "Show Duplicates" toggle to see all files, including copies and duplicates
- **Select individually**: Check/uncheck specific files you want to upload
- **Override deduplication**: Files marked as copies or duplicates can be manually selected for upload if needed

The deduplication system provides intelligent defaults, but you maintain full control over what gets uploaded.
